<title>Wordie v0.7</title>
<meta name="viewport" content="width=device-width, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta charset="utf-8">
<link rel="stylesheet" href="./style.css">

<body>
  <div class="wrapper">
    <div class="bottom">
      <div id="new" class="button">New</div>
      <div class="title">Wordie</div>
      <div id="difficulty" class="button">Easy</div>
    </div>
    <div id="board"></div>
    <div id="alphabet"></div>
    <div class="bottom">
      <div id="clear" class="button">Clear</div>
      <div id="message" class="message"></div>
      <div id="apply" class="button">Guess</div>
    </div>
  </div>
  <div id="stats">
    <b>Stats:</b>
    <div>Games: <span id="games"></span></div>
    <div>Wins: <span id="wins"></span></div>
    <table id="guessHistogram"></table>
    <div>Loses: <span id="loses"></span></div>
    <div>Incomplete: <span id="incomplete"></span></div>
    <div>Since: <span id="earliest"></span></div>
  </div>
</body>

<script type="module">

  const Difficulty = [ 'Easy', 'Hard' ];

  import { Board } from './Board.js';

  let difficulty = 0;
  const difficultyButton = document.getElementById( 'difficulty' );
  
  let board;

  document.getElementById( 'new' ).onclick = newBoard;
  difficultyButton.onclick = () => {
    difficulty = ( difficulty + 1 ) % Difficulty.length;
    difficultyButton.textContent = Difficulty[ difficulty ];
  }
  document.getElementById( 'clear' ).onclick = () => board.clearLetter();
  document.getElementById( 'apply' ).onclick = () => board.applyGuess();

  document.onkeydown = ( e ) => {
    if ( e.key.length == 1 && /[a-z]/i.test( e.key ) ) {
      board.addLetter( e.key );
    }
    else if ( e.key == 'Backspace' ) {
      board.clearLetter();
    }
    else if ( e.key == 'Enter' ) {
      board.applyGuess();
    }
  }

  newBoard();

  function newBoard() {
    board = Board.fromDifficulty( difficulty );
  }

</script>